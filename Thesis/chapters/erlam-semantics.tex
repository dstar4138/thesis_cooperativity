%
% The ErLam Semantics together with formatting.
%
\begin{gather}
    \inference[Variable]{ E(x) \Rightarrow v 
                       }{ E : x \rightarrow E : v } \\[2ex]

    \inference[Integer]{}{ E : n \rightarrow E : n } \\[2ex]

    \inference[Fun]{}{ E : \textbf{fun}\: x \textbf{.} e 
           \rightarrow E : \textbf{fun}\: x \textbf{.} e } \\[2ex] 

    \inference[NewChan]{ E(chan) \Rightarrow n 
                      }{ E : \textbf{newchan} \rightarrow 
                         E;(chan,n+1) : chan_n } \\[2ex]

    \inference[Unwrap]{}{ E : \textbf{(} e \textbf{)} \rightarrow E : e } \\[2ex]

    \inference[App(1)]{ E : e_1 \rightarrow E' : e'_1
                     }{ E : e_1 e_2 \rightarrow E' : e'_1 e_2 } \\[2ex]

    \inference[App(2)]{ 
           E : e_2 \rightarrow E' : e'_2 }{ 
           E  : \textbf{fun}\: x \textbf{.} e_1 e_2 \rightarrow 
           E' : \textbf{fun}\: x \textbf{.} e_1 e'_2 } \\[2ex]

    \inference[App(3)]{}{ 
           E : \textbf{fun}\: x \textbf{.} e_1 v \rightarrow
           E;(x,v) : e_1 } \\[2ex]

    \inference[If(1)]{ E : e_1 \rightarrow E' : e'_1 
                    }{ E  : \textbf{if}\: e_1\: e_2\: e_3 \rightarrow 
                       E' : \textbf{if}\: e'_1\: e_2\: e_3 } \\[2ex]

    \inference[If(2)]{ v \geq 1  
                    }{ E : \textbf{if}\: v\: e_2\: e_3 \rightarrow 
                       E : e_2 } \\[2ex]

    \inference[If(3)]{ v \leq 0  
                    }{ E : \textbf{if}\: v\: e_2\: e_3 \rightarrow 
                      E : e_3 } \\[2ex]

    \inference[Swap(1)]{ E : e_1 \rightarrow E' : e'_1 
                      }{ E : \textbf{swap}\: e_1 e_2 \rightarrow
                         E' : \textbf{swap}\: e'_1 e_2 } \\[2ex]

    \inference[Swap(2)]{ E : e_2 \rightarrow E' : e'_2 
                      }{ E : \textbf{swap}\: c e_2 \rightarrow
                         E' : \textbf{swap}\: c e'_2 } \\[2ex]

    \inference[Swap(3)]{ c ! v \Rightarrow \emptyset 
                      }{ E : \textbf{swap}\: c v \rightarrow
                         E : \textbf{swap}\: c v } \\[2ex] 

    \inference[Swap(4)]{ c ! v \Rightarrow e
                      }{ E : \textbf{swap}\: c v \rightarrow
                         E : e } \\[2ex] 

    \inference[Spawn(1)]{ E : e \rightarrow E' : e' }{
                         E : \textbf{spawn} e \rightarrow 
                         E' : \textbf{spawn} e'} \\[2ex]

    \inference[Spawn(2)]{ \textbf{fork(} f \textbf{)} \Rightarrow v }
                       { E : \textbf{spawn} f \rightarrow E : v }
                    
\end{gather}

